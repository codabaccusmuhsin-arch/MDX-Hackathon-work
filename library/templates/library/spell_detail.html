{% extends 'base.html' %}

{% block title %}{{ spell.name }} - Spell Details{% endblock %}

{% block content %}
<h1>{{ spell.name }}</h1>

<div class="spell-card">
    <div>
        <span>Type: {{ spell.type }}</span> |
        <span>Power Class: {{ spell.power_class }}</span>
        {% if spell.restricted %}<span class="restricted">[Restricted]</span>{% endif %}
    </div>

    {% if spell.restricted and not user.is_authenticated %}
        <div style="color:red; font-style: italic; margin-top: 10px;">
            This spell is restricted. Please <a href="{% url 'login' %}">sign in</a> to view details.
        </div>
    {% elif spell.restricted and not is_trusted %}
        <div style="color:red; font-style: italic; margin-top: 10px;">
            You do not have permission to view this restricted spell.
        </div>
    {% else %}
        <div style="margin-top: 10px;">
            <strong>Author:</strong> {{ spell.author }}<br>
            <strong>Origin:</strong> {{ spell.origin }}<br>
            {% if spell.time_based %}<strong>Time-Based:</strong> Yes<br>{% endif %}
            {% if spell.language %}<strong>Language:</strong> {{ spell.language }}<br>{% endif %}
            {% if spell.usage_context %}<strong>Usage Context:</strong> {{ spell.usage_context|capfirst }}<br>{% endif %}
        </div>
    {% endif %}
</div>

<p><a href="{% url 'spell_list' %}">Back to Library</a></p>
{% endblock %}
